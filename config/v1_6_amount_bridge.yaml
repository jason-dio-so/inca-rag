# V1.6 Amount Bridge Configuration
#
# 목적: Subtype SAFE_RESOLVED 이후 금액 비교(브릿지) 허용 조건 정의
#
# 핵심 원칙:
# - 신정원 canonical(A4210)만 허용
# - 금액 의도가 명확할 때만 브릿지 활성화
# - Evidence 기반 금액만 출력 (추론 금지)
# - 허용 subtype: borderline_tumor, carcinoma_in_situ만

# =============================================================================
# Bridge 활성화 설정
# =============================================================================
bridge:
  enabled: true

  # 브릿지 허용 subtype (V1.5-HOTFIX 준수)
  allow_subtypes:
    - borderline_tumor
    - carcinoma_in_situ

  # 브릿지 대상 anchor 코드 (신정원 canonical 고정)
  anchor_code: A4210

  # 최소 evidence 개수 (보험사별)
  min_evidence_count: 1

# =============================================================================
# Amount Intent 판정 키워드
# =============================================================================
amount_intent:
  # 금액 의도 키워드 (하나라도 포함되면 is_amount_intent=True)
  keywords:
    - 보장금액
    - 진단금
    - 보험금
    - 금액
    - 얼마
    - 한도
    - 지급금
    - 만원
    - 천만원
    - 백만원
    - 가입금액
    - 보장액

  # 금액 의도 정규식 패턴 (OR 조합)
  regex_patterns:
    - '\d{1,3}(,\d{3})+원'     # 1,000,000원
    - '\d+만\s*원'             # 600만원, 600만 원
    - '\d+천만\s*원'           # 3천만원
    - '\d+백만\s*원'           # 6백만원
    - '\d+만$'                 # 600만 (문장 끝)

# =============================================================================
# 조건 분기 표시 규칙 (LOTTE/DB)
# =============================================================================
condition_branch:
  # LOTTE: 남/여 문서 분기 감지
  lotte:
    enabled: true
    detection_keywords:
      - 남자
      - 여자
      - 남성
      - 여성
    branch_message: "성별에 따라 상이"

  # DB: 연령 구간 분기 감지 (40세 이하/41세 이상)
  db:
    enabled: true
    detection_keywords:
      - 40세
      - 41세
      - 이하
      - 이상
    branch_message: "연령 구간에 따라 상이"

# =============================================================================
# Partial Failure 설정
# =============================================================================
partial_failure:
  # 일부 보험사에서 금액을 못 찾아도 전체 응답은 성공
  allow_partial: true

  # 금액 미발견 시 표시 메시지
  not_found_message: "해당 담보의 금액 정보를 찾을 수 없습니다"

  # 금액 미발견 상태값
  not_found_status: "NOT_FOUND"

# =============================================================================
# 응답 메시지 템플릿
# =============================================================================
messages:
  bridge_note: "이 결과는 {subtype} 기반으로 {coverage_name}(A4210)을 비교축으로 사용했습니다."
  amount_source_note: "금액은 가입설계서/상품요약서의 근거에서 추출되었습니다."
