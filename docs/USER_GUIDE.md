# ë³´í—˜ ì•½ê´€ ë¹„êµ RAG ì‹œìŠ¤í…œ - ì‚¬ìš© ì„¤ëª…ì„œ

> ë²„ì „: 2025-12-20 (STEP 4.7)
>
> ì´ ë¬¸ì„œëŠ” ë³´í—˜ ì•½ê´€ ë¹„êµ RAG ì‹œìŠ¤í…œì˜ ëª¨ë“  ê¸°ëŠ¥ì„ í™”ë©´ì—ì„œ ì§ì ‘ ì‹œí—˜í•´ë³¼ ìˆ˜ ìžˆë„ë¡ ìž‘ì„±ëœ ì‚¬ìš© ì„¤ëª…ì„œìž…ë‹ˆë‹¤.

---

## ëª©ì°¨

1. [ì‹œìŠ¤í…œ ê°€ë™ ë°©ë²•](#1-ì‹œìŠ¤í…œ-ê°€ë™-ë°©ë²•)
2. [ë‹¨ì¼ ë³´í—˜ì‚¬ ë‹´ë³´ ì¡°íšŒ (Lookup)](#2-ë‹¨ì¼-ë³´í—˜ì‚¬-ë‹´ë³´-ì¡°íšŒ-lookup)
3. [ë³´í—˜ì‚¬ ê°„ ë‹´ë³´ ë¹„êµ (Compare)](#3-ë³´í—˜ì‚¬-ê°„-ë‹´ë³´-ë¹„êµ-compare)
4. [ë‹´ë³´ í›„ë³´ ì„ íƒ (UNRESOLVED ìƒíƒœ)](#4-ë‹´ë³´-í›„ë³´-ì„ íƒ-unresolved-ìƒíƒœ)
5. [ë‹´ë³´ ê³ ì • (Anchor Lock)](#5-ë‹´ë³´-ê³ ì •-anchor-lock)
6. [ë‹¤ì¤‘ Subtype ë¹„êµ](#6-ë‹¤ì¤‘-subtype-ë¹„êµ)
7. [ë³µìˆ˜ ë‹´ë³´ ì„ íƒ](#7-ë³µìˆ˜-ë‹´ë³´-ì„ íƒ)
8. [Evidence ì›ë¬¸ ë³´ê¸°](#8-evidence-ì›ë¬¸-ë³´ê¸°)
9. [ë¹„êµ ê²°ê³¼ íƒ­ í™œìš©](#9-ë¹„êµ-ê²°ê³¼-íƒ­-í™œìš©)
10. [Debug ì •ë³´ í™•ì¸ (ê°œë°œìžìš©)](#10-debug-ì •ë³´-í™•ì¸-ê°œë°œìžìš©)
11. [ë¬¸ì œ í•´ê²°](#11-ë¬¸ì œ-í•´ê²°)

---

## 1. ì‹œìŠ¤í…œ ê°€ë™ ë°©ë²•

### 1.1 ì‚¬ì „ ìš”êµ¬ì‚¬í•­

- Docker Desktop ì„¤ì¹˜ ë° ì‹¤í–‰
- ìµœì†Œ 4GB RAM í• ë‹¹
- í”„ë¡œì íŠ¸ ì†ŒìŠ¤ì½”ë“œ (`inca-rag` ë””ë ‰í† ë¦¬)

### 1.2 ì‹œìŠ¤í…œ ì‹œìž‘

```bash
# 1. í”„ë¡œì íŠ¸ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd /path/to/inca-rag

# 2. Docker Composeë¡œ ì „ì²´ ì‹œìŠ¤í…œ ì‹œìž‘
docker compose -f docker-compose.demo.yml up -d

# 3. ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸ (ëª¨ë‘ healthyì—¬ì•¼ í•¨)
docker compose -f docker-compose.demo.yml ps
```

**ì˜ˆìƒ ì¶œë ¥:**
```
NAME              STATUS
inca_demo_db      Up (healthy)
inca_demo_api     Up (healthy)
inca_demo_web     Up
inca_demo_nginx   Up
```

### 1.3 ì‹œìŠ¤í…œ ì ‘ì†

| ì„œë¹„ìŠ¤ | URL | ì„¤ëª… |
|--------|-----|------|
| **Web UI** | http://localhost | ë©”ì¸ ì‚¬ìš©ìž ì¸í„°íŽ˜ì´ìŠ¤ |
| API (ì§ì ‘) | http://localhost:8000 | FastAPI ë°±ì—”ë“œ |
| API ë¬¸ì„œ | http://localhost:8000/docs | Swagger UI |
| DB | localhost:5432 | PostgreSQL (postgres/postgres) |

### 1.4 ì‹œìŠ¤í…œ ìƒíƒœ í™•ì¸

```bash
# API í—¬ìŠ¤ì²´í¬
curl http://localhost:8000/health

# ì˜ˆìƒ ì‘ë‹µ: {"status": "healthy"}
```

### 1.5 ì‹œìŠ¤í…œ ì¢…ë£Œ

```bash
docker compose -f docker-compose.demo.yml down
```

### 1.6 ë°ì´í„° ì´ˆê¸°í™” (í•„ìš” ì‹œ)

```bash
# ë°ì´í„° ë³¼ë¥¨ í¬í•¨ ì™„ì „ ì´ˆê¸°í™”
docker compose -f docker-compose.demo.yml down -v

# ìž¬ì‹œìž‘
docker compose -f docker-compose.demo.yml up -d
```

---

## 2. ê¸°ë³¸ ë‹´ë³´ ë¹„êµ

### 2.1 ê¸°ëŠ¥ ì„¤ëª…

ë‘ ê°œ ì´ìƒì˜ ë³´í—˜ì‚¬ ê°„ íŠ¹ì • ë‹´ë³´ë¥¼ ë¹„êµí•˜ëŠ” ê¸°ë³¸ ê¸°ëŠ¥ìž…ë‹ˆë‹¤.

### 2.2 ìž…ë ¥ ë°©ë²•

1. **ì›¹ ë¸Œë¼ìš°ì €ì—ì„œ http://localhost ì ‘ì†**
2. **í•˜ë‹¨ ìž…ë ¥ì°½ì— ì§ˆì˜ ìž…ë ¥**
3. **ë³´í—˜ì‚¬ ì„ íƒ** (ê¸°ë³¸: ì‚¼ì„±, ë©”ë¦¬ì¸ )
4. **Enter í‚¤ ë˜ëŠ” ì „ì†¡ ë²„íŠ¼ í´ë¦­**

### 2.3 ì‹œí—˜ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤ A: ì•”ì§„ë‹¨ë¹„ ë¹„êµ

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ìž…ë ¥** | `ì•”ì§„ë‹¨ë¹„ ë¹„êµ` |
| **ë³´í—˜ì‚¬** | ì‚¼ì„±, ë©”ë¦¬ì¸  (ê¸°ë³¸ê°’) |
| **ì˜ˆìƒ ê²°ê³¼** | ë¹„êµí‘œì— ì–‘ìª½ ë³´í—˜ì‚¬ì˜ ì•”ì§„ë‹¨ë¹„ ì •ë³´ í‘œì‹œ |

**í™•ì¸ í¬ì¸íŠ¸:**
- âœ… ë¹„êµí‘œ(Compare íƒ­)ì— ë³´í—˜ì‚¬ë³„ ê¸ˆì•¡ í‘œì‹œ
- âœ… Evidence íƒ­ì— ê·¼ê±° ë¬¸ì„œ í‘œì‹œ
- âœ… Diff íƒ­ì— ì°¨ì´ì  ìš”ì•½ í‘œì‹œ

#### ì‹œë‚˜ë¦¬ì˜¤ B: ë‡Œì¡¸ì¤‘ì§„ë‹¨ë¹„ ë¹„êµ

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ìž…ë ¥** | `ë‡Œì¡¸ì¤‘ì§„ë‹¨ë¹„ ë¹„êµí•´ì¤˜` |
| **ë³´í—˜ì‚¬** | ì‚¼ì„±, ë©”ë¦¬ì¸  |
| **ì˜ˆìƒ ê²°ê³¼** | ë‡Œì¡¸ì¤‘ì§„ë‹¨ë¹„ ë¹„êµ ê²°ê³¼ í‘œì‹œ |

---

## 3. ë‹´ë³´ í›„ë³´ ì„ íƒ (UNRESOLVED ìƒíƒœ)

### 3.1 ê¸°ëŠ¥ ì„¤ëª…

ì‹œìŠ¤í…œì´ ì§ˆì˜ì—ì„œ ë‹´ë³´ë¥¼ ëª…í™•ížˆ íŒŒì•…í•˜ì§€ ëª»í•œ ê²½ìš° í›„ë³´ ëª©ë¡ì„ ì œì•ˆí•©ë‹ˆë‹¤.

### 3.2 ì‹œí—˜ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤: ë‹¤ë¹ˆì¹˜ ìˆ˜ìˆ ë¹„ (ëª¨í˜¸í•œ ì§ˆì˜)

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ìž…ë ¥** | `ë‹¤ë¹ˆì¹˜ ìˆ˜ìˆ ë¹„ ë¹„êµ` |
| **ì˜ˆìƒ ê²°ê³¼** | UNRESOLVED ìƒíƒœ + í›„ë³´ ë‹´ë³´ ëª©ë¡ í‘œì‹œ |

**ìž…ë ¥ ë°©ë²•:**
1. ìž…ë ¥ì°½ì— `ë‹¤ë¹ˆì¹˜ ìˆ˜ìˆ ë¹„ ë¹„êµ` ìž…ë ¥
2. Enter í‚¤ ìž…ë ¥

**ê²°ê³¼ í™•ì¸:**
1. í™”ë©´ì— **"ë‹´ë³´ë¥¼ ì„ íƒí•´ ì£¼ì„¸ìš”"** ë©”ì‹œì§€ í‘œì‹œ
2. í›„ë³´ ë‹´ë³´ ëª©ë¡ í‘œì‹œ (ì˜ˆ: ë‹¤ë¹ˆì¹˜ë¡œë´‡ì•”ìˆ˜ìˆ ë¹„, ì§ˆë³‘ìˆ˜ìˆ ë¹„ ë“±)
3. ê° í›„ë³´ ì˜†ì— ìœ ì‚¬ë„(%) í‘œì‹œ

**í›„ë³´ ì„ íƒ:**
1. ì›í•˜ëŠ” ë‹´ë³´ì˜ ì²´í¬ë°•ìŠ¤ ì„ íƒ
2. **"Nê°œ ë‹´ë³´ë¡œ ë¹„êµ"** ë²„íŠ¼ í´ë¦­
3. í•´ë‹¹ ë‹´ë³´ë¡œ ë¹„êµ ê²°ê³¼ í‘œì‹œ

---

## 4. ë‹´ë³´ ê³ ì • (Anchor Lock)

### 4.1 ê¸°ëŠ¥ ì„¤ëª…

í•œ ë²ˆ ì„ íƒí•œ ë‹´ë³´ë¥¼ ê³ ì •í•˜ì—¬ í›„ì† ì§ˆì˜ì—ì„œë„ ë™ì¼í•œ ë‹´ë³´ë¡œ ë¹„êµë¥¼ ìœ ì§€í•©ë‹ˆë‹¤.

### 4.2 ì‹œí—˜ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤: ë‹´ë³´ ê³ ì • í›„ ìž¬ì§ˆì˜

| ë‹¨ê³„ | ìž…ë ¥ | ì˜ˆìƒ ê²°ê³¼ |
|------|------|----------|
| 1 | `ë‹¤ë¹ˆì¹˜ ìˆ˜ìˆ ë¹„ ë¹„êµ` | UNRESOLVED + í›„ë³´ í‘œì‹œ |
| 2 | í›„ë³´ì—ì„œ "ë‹¤ë¹ˆì¹˜ë¡œë´‡ì•”ìˆ˜ìˆ ë¹„" ì„ íƒ | ðŸ”’ Lock í‘œì‹œ + ë¹„êµ ê²°ê³¼ |
| 3 | `ì‚¼ì„±ê³¼ í˜„ëŒ€ë¡œ ë¹„êµí•´ì¤˜` | Lock ìœ ì§€ + ë™ì¼ ë‹´ë³´ë¡œ ë¹„êµ |

**í™•ì¸ í¬ì¸íŠ¸:**
- âœ… ë‹´ë³´ ì„ íƒ í›„ ì±„íŒ…ì°½ ìƒë‹¨ì— ðŸ”’ ì•„ì´ì½˜ í‘œì‹œ
- âœ… "ë‹´ë³´: ë‹¤ë¹ˆì¹˜ë¡œë´‡ì•”ìˆ˜ìˆ ë¹„ (A9630_1)" í‘œì‹œ
- âœ… í›„ì† ì§ˆì˜ì—ì„œë„ ë‹´ë³´ ìœ ì§€

### 4.3 ë‹´ë³´ ìž ê¸ˆ í•´ì œ

1. ì±„íŒ…ì°½ ìƒë‹¨ì˜ **"ë‹´ë³´ ë³€ê²½"** ë²„íŠ¼ í´ë¦­
2. ìž ê¸ˆ í•´ì œ í›„ ìƒˆ ì§ˆì˜ ìž…ë ¥
3. ìƒˆë¡œìš´ ë‹´ë³´ í›„ë³´ í‘œì‹œ

---

## 5. ë‹¤ì¤‘ Subtype ë¹„êµ

### 5.1 ê¸°ëŠ¥ ì„¤ëª…

ê²½ê³„ì„± ì¢…ì–‘, ì œìžë¦¬ì•” ë“± ì§ˆë³‘ í•˜ìœ„ ë¶„ë¥˜(Subtype)ë¥¼ ë™ì‹œì— ë¹„êµí•©ë‹ˆë‹¤.

**ì§€ì› Subtype:**
| Subtype | í•œê¸€ëª… | ë„ë©”ì¸ |
|---------|--------|--------|
| BORDERLINE_TUMOR | ê²½ê³„ì„± ì¢…ì–‘ | ì•” |
| CIS_CARCINOMA | ì œìžë¦¬ì•” | ì•” |
| SIMILAR_CANCER | ìœ ì‚¬ì•” | ì•” |
| RECURRENT_CANCER | ìž¬ì§„ë‹¨ì•” | ì•” |
| STROKE | ë‡Œì¡¸ì¤‘ | ë‡Œ/ì‹¬í˜ˆê´€ |
| CEREBROVASCULAR | ë‡Œí˜ˆê´€ì§ˆí™˜ | ë‡Œ/ì‹¬í˜ˆê´€ |
| ISCHEMIC_HEART | í—ˆí˜ˆì„±ì‹¬ìž¥ì§ˆí™˜ | ë‡Œ/ì‹¬í˜ˆê´€ |

### 5.2 ì‹œí—˜ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤: ê²½ê³„ì„± ì¢…ì–‘ê³¼ ì œìžë¦¬ì•” ë¹„êµ

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ìž…ë ¥** | `ê²½ê³„ì„± ì¢…ì–‘ê³¼ ì œìžë¦¬ì•” ë¹„êµ` |
| **ë³´í—˜ì‚¬** | ì‚¼ì„±, ë©”ë¦¬ì¸  |
| **ì˜ˆìƒ ê²°ê³¼** | ë‘ Subtypeì˜ ì •ì˜/ë³´ìž¥/ì¡°ê±´ ë¹„êµí‘œ |

**ê²°ê³¼ í™•ì¸:**
1. **"ë‹¤ì¤‘ Subtype ë¹„êµ"** ë°°ì§€ í‘œì‹œ
2. **Accordion í˜•íƒœ**ë¡œ ê° Subtype ê·¸ë£¹í•‘
   - ê²½ê³„ì„± ì¢…ì–‘ ì„¹ì…˜
   - ì œìžë¦¬ì•” ì„¹ì…˜
3. ê° ì„¹ì…˜ì— 4ìš”ì†Œ í‘œì‹œ:
   - **ë³´ìž¥ ì—¬ë¶€**: Y/N/ë¶€ë¶„ë³´ìž¥
   - **ì •ì˜**: ì•½ê´€ìƒ ì •ì˜
   - **ì§€ê¸‰ ì¡°ê±´**: ëŒ€ê¸°ê¸°ê°„, ì¡°ê±´ ë“±
   - **ê²½ê³„/ê°ì•¡/ì œí•œ**: ê°ì•¡ë¥ , ë©´ì±… ë“±

### 5.3 4ìš”ì†Œ ê·œì•½ (STEP 4.7)

ê° Subtype ë¹„êµ ê²°ê³¼ëŠ” ë‹¤ìŒ 4ê°€ì§€ ìš”ì†Œë¥¼ í¬í•¨í•©ë‹ˆë‹¤:

| ìš”ì†Œ | ì„¤ëª… | ì˜ˆì‹œ |
|------|------|------|
| **Definition** | ì•½ê´€ìƒ ì •ì˜ | "ê²½ê³„ì„±ì¢…ì–‘ì´ë¼ í•¨ì€..." |
| **Condition** | ì§€ê¸‰ ì¡°ê±´ | "90ì¼ ëŒ€ê¸°ê¸°ê°„ í›„ ë³´ìž¥" |
| **Boundary** | ê²½ê³„/ê°ì•¡/ì œí•œ | "50% ê°ì•¡ ì§€ê¸‰" |
| **Evidence** | ê·¼ê±° ì¸ìš© | [ì•½ê´€] p.178 |

---

## 6. ë³µìˆ˜ ë‹´ë³´ ì„ íƒ

### 6.1 ê¸°ëŠ¥ ì„¤ëª…

UNRESOLVED ìƒíƒœì—ì„œ ì—¬ëŸ¬ ë‹´ë³´ë¥¼ ë™ì‹œì— ì„ íƒí•˜ì—¬ ë¹„êµí•©ë‹ˆë‹¤.

### 6.2 ì‹œí—˜ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤: ì•”ì§„ë‹¨ë¹„ + ìœ ì‚¬ì•”ì§„ë‹¨ë¹„ ë™ì‹œ ë¹„êµ

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ìž…ë ¥** | `ì•” ê´€ë ¨ ë‹´ë³´ ë¹„êµ` |
| **ì˜ˆìƒ ê²°ê³¼** | í›„ë³´ ëª©ë¡ì—ì„œ ë³µìˆ˜ ì„ íƒ ê°€ëŠ¥ |

**ìž…ë ¥ ë°©ë²•:**
1. ì§ˆì˜ ìž…ë ¥ í›„ í›„ë³´ ëª©ë¡ í‘œì‹œ
2. **ì²´í¬ë°•ìŠ¤**ë¡œ ì—¬ëŸ¬ ë‹´ë³´ ì„ íƒ:
   - â˜‘ ì•”ì§„ë‹¨ë¹„(ìœ ì‚¬ì•”ì œì™¸) (A4200_1)
   - â˜‘ ìœ ì‚¬ì•”ì§„ë‹¨ë¹„ (A4210)
3. **"2ê°œ ë‹´ë³´ë¡œ ë¹„êµ"** ë²„íŠ¼ í´ë¦­

**ê²°ê³¼ í™•ì¸:**
- âœ… ì„ íƒí•œ ëª¨ë“  ë‹´ë³´ì— ëŒ€í•œ ë¹„êµ ê²°ê³¼ í‘œì‹œ
- âœ… ë‹¤ì¤‘ Subtype UIë¡œ ê·¸ë£¹í™”ëœ ê²°ê³¼

---

## 7. Evidence ì›ë¬¸ ë³´ê¸°

### 7.1 ê¸°ëŠ¥ ì„¤ëª…

ë¹„êµ ê²°ê³¼ì˜ ê·¼ê±°ê°€ ë˜ëŠ” ì•½ê´€ ì›ë¬¸ì„ PDFë¡œ í™•ì¸í•©ë‹ˆë‹¤.

### 7.2 ì‚¬ìš© ë°©ë²•

1. ë¹„êµ ê²°ê³¼ì—ì„œ **"Evidence" íƒ­** í´ë¦­
2. ê·¼ê±° ëª©ë¡ì—ì„œ **"ì›ë¬¸ ë³´ê¸°"** ë§í¬ í´ë¦­
3. PDF ë·°ì–´ì—ì„œ í•´ë‹¹ íŽ˜ì´ì§€ í™•ì¸

### 7.3 ì‹œí—˜ ì‹œë‚˜ë¦¬ì˜¤

#### ì‹œë‚˜ë¦¬ì˜¤: ì•”ì§„ë‹¨ë¹„ ê·¼ê±° í™•ì¸

| ë‹¨ê³„ | ë™ìž‘ | í™•ì¸ |
|------|------|------|
| 1 | `ì•”ì§„ë‹¨ë¹„ ë¹„êµ` ìž…ë ¥ | ë¹„êµ ê²°ê³¼ í‘œì‹œ |
| 2 | Evidence íƒ­ í´ë¦­ | ê·¼ê±° ë¬¸ì„œ ëª©ë¡ |
| 3 | ì‚¼ì„± ê·¼ê±° í´ë¦­ | PDF ë·°ì–´ ì—´ë¦¼ |

**í™•ì¸ í¬ì¸íŠ¸:**
- âœ… PDF íŽ˜ì´ì§€ ë²ˆí˜¸ í‘œì‹œ
- âœ… ë¬¸ì„œ ìœ í˜• í‘œì‹œ (ì•½ê´€, ì‚¬ì—…ë°©ë²•ì„œ ë“±)
- âœ… ê´€ë ¨ í…ìŠ¤íŠ¸ ë°œì·Œ(excerpt) í‘œì‹œ

### 7.4 Evidence ìš°ì„ ìˆœìœ„

| ìš°ì„ ìˆœìœ„ | ë¬¸ì„œ ìœ í˜• | í‘œì‹œ |
|----------|----------|------|
| P1 (ìµœìš°ì„ ) | ì•½ê´€ | â­â­â­ |
| P2 | ì‚¬ì—…ë°©ë²•ì„œ | â­â­ |
| P3 | ê°€ìž…ì„¤ê³„ì„œ/ìƒí’ˆìš”ì•½ì„œ | â­ |

---

## 8. ë¹„êµ ê²°ê³¼ íƒ­ í™œìš©

### 8.1 Compare íƒ­

**ëª©ì :** ë³´í—˜ì‚¬ë³„ ë‹´ë³´ ê¸ˆì•¡/ì¡°ê±´ ë¹„êµí‘œ

| ì—´ | ë‚´ìš© |
|----|------|
| ë‹´ë³´ëª… | ë¹„êµ ëŒ€ìƒ ë‹´ë³´ |
| ì‚¼ì„± | ì‚¼ì„± ë³´ìž¥ ê¸ˆì•¡/ì¡°ê±´ |
| ë©”ë¦¬ì¸  | ë©”ë¦¬ì¸  ë³´ìž¥ ê¸ˆì•¡/ì¡°ê±´ |

### 8.2 Evidence íƒ­

**ëª©ì :** ë¹„êµ ê²°ê³¼ì˜ ê·¼ê±° ë¬¸ì„œ í™•ì¸

| í•­ëª© | ì„¤ëª… |
|------|------|
| ë¬¸ì„œ ìœ í˜• | ì•½ê´€, ì‚¬ì—…ë°©ë²•ì„œ, ìƒí’ˆìš”ì•½ì„œ |
| íŽ˜ì´ì§€ | PDF íŽ˜ì´ì§€ ë²ˆí˜¸ |
| ë°œì·Œ | ê´€ë ¨ ë¬¸ìž¥ ì¸ìš© |
| ì›ë¬¸ ë³´ê¸° | PDF ë·°ì–´ ë§í¬ |

### 8.3 Diff íƒ­

**ëª©ì :** ë³´í—˜ì‚¬ ê°„ ì£¼ìš” ì°¨ì´ì  ìš”ì•½

| ì„¹ì…˜ | ë‚´ìš© |
|------|------|
| ìš”ì•½ ë¬¸êµ¬ | ì£¼ìš” ì°¨ì´ì  í…ìŠ¤íŠ¸ |
| ìƒì„¸ ë¹„êµ | í•­ëª©ë³„ ì°¨ì´ í‘œì‹œ |

### 8.4 Slots íƒ­

**ëª©ì :** ìŠ¬ë¡¯ ê¸°ë°˜ êµ¬ì¡°í™”ëœ ë¹„êµ (ê¸ˆì•¡, ì¡°ê±´ ë¶„ë¦¬)

| ìŠ¬ë¡¯ | ì˜ˆì‹œ |
|------|------|
| ë³´ìž¥ê¸ˆì•¡ | 3,000ë§Œì› / 2,000ë§Œì› |
| ëŒ€ê¸°ê¸°ê°„ | 90ì¼ / 90ì¼ |
| ê°ì•¡ê¸°ê°„ | 1ë…„ 50% / 2ë…„ 50% |

---

## 9. Debug ì •ë³´ í™•ì¸ (ê°œë°œìžìš©)

### 9.1 ê¸°ëŠ¥ ì„¤ëª…

API ì‘ë‹µì˜ ìƒì„¸ ì •ë³´ë¥¼ í™•ì¸í•˜ëŠ” ê°œë°œìž/QA ì „ìš© ê¸°ëŠ¥ìž…ë‹ˆë‹¤.

> âš ï¸ **ì£¼ì˜:** ì´ ì„¹ì…˜ì€ ê°œë°œìž/QA ì „ìš©ìž…ë‹ˆë‹¤. ì‚¬ìš©ìž UX íŒë‹¨ì— ì‚¬ìš©í•˜ì§€ ë§ˆì„¸ìš”.

### 9.2 í™•ì¸ ë°©ë²•

1. ë¹„êµ ê²°ê³¼ í™”ë©´ì—ì„œ **"Debug (ê°œë°œìž ì „ìš©)"** ì„¹ì…˜ ì°¾ê¸°
2. íŽ¼ì¹˜ê¸° í´ë¦­

### 9.3 ì£¼ìš” í•„ë“œ

| í•„ë“œ | ì„¤ëª… |
|------|------|
| `resolution_state` | RESOLVED / UNRESOLVED / INVALID / SUBTYPE_MULTI |
| `coverage_resolution.status` | ë‹´ë³´ í•´ì„ ìƒíƒœ |
| `coverage_resolution.suggested_coverages` | ì¶”ì²œ ë‹´ë³´ ëª©ë¡ |
| `debug.anchor.coverage_locked` | ë‹´ë³´ ê³ ì • ì—¬ë¶€ |
| `debug.anchor.locked_coverage_codes` | ê³ ì •ëœ ë‹´ë³´ ì½”ë“œ ëª©ë¡ |

### 9.4 Contract ê·œì•½ í™•ì¸

**ì •ë‹µ ê²½ë¡œ:**
```
Lock ìƒíƒœ: debug.anchor.coverage_locked
ê³ ì • ë‹´ë³´: debug.anchor.locked_coverage_codes
í›„ë³´ ë‹´ë³´: coverage_resolution.suggested_coverages
```

---

## 10. ë¬¸ì œ í•´ê²°

### 10.1 ì»¨í…Œì´ë„ˆê°€ ì‹œìž‘ë˜ì§€ ì•ŠìŒ

```bash
# ë¡œê·¸ í™•ì¸
docker compose -f docker-compose.demo.yml logs api

# ì»¨í…Œì´ë„ˆ ìž¬ì‹œìž‘
docker compose -f docker-compose.demo.yml restart api
```

### 10.2 API ì‘ë‹µ ì—†ìŒ

```bash
# í—¬ìŠ¤ì²´í¬
curl http://localhost:8000/health

# ì»¨í…Œì´ë„ˆ ìƒíƒœ í™•ì¸
docker compose -f docker-compose.demo.yml ps
```

### 10.3 ë¹„êµ ê²°ê³¼ê°€ ë¹„ì–´ ìžˆìŒ

1. **DB ë°ì´í„° í™•ì¸:**
```bash
docker exec -it inca_demo_db psql -U postgres -d inca_rag -c "SELECT COUNT(*) FROM chunk;"
```

2. **ë°ì´í„° ìž¬ì ìž¬:**
```bash
# API ì»¨í…Œì´ë„ˆ ë‚´ë¶€ì—ì„œ
docker exec -it inca_demo_api python tools/load_coverage_mapping.py
```

### 10.4 ì»¨í…Œì´ë„ˆ ì™„ì „ ìž¬ë¹Œë“œ

```bash
# ì´ë¯¸ì§€ ìž¬ë¹Œë“œ
docker compose -f docker-compose.demo.yml build --no-cache

# ìž¬ì‹œìž‘
docker compose -f docker-compose.demo.yml up -d
```

### 10.5 curlë¡œ API ì§ì ‘ í…ŒìŠ¤íŠ¸

```bash
# ê¸°ë³¸ ë¹„êµ í…ŒìŠ¤íŠ¸
curl -s 'http://localhost:8000/compare' \
  -H 'Content-Type: application/json' \
  -d '{"query":"ì•”ì§„ë‹¨ë¹„ ë¹„êµ","insurers":["SAMSUNG","MERITZ"]}'

# ë©€í‹° Subtype í…ŒìŠ¤íŠ¸
curl -s 'http://localhost:8000/compare' \
  -H 'Content-Type: application/json' \
  -d '{"query":"ê²½ê³„ì„± ì¢…ì–‘ê³¼ ì œìžë¦¬ì•” ë¹„êµ","insurers":["SAMSUNG","MERITZ"]}'

# locked_coverage_codes í…ŒìŠ¤íŠ¸
curl -s 'http://localhost:8000/compare' \
  -H 'Content-Type: application/json' \
  -d '{"query":"ì•”ì§„ë‹¨ë¹„ ë¹„êµ","insurers":["SAMSUNG","MERITZ"],"locked_coverage_codes":["A4200_1"]}'
```

---

## ë¶€ë¡: ì§€ì› ë³´í—˜ì‚¬ ì½”ë“œ

| ì½”ë“œ | ë³´í—˜ì‚¬ëª… |
|------|----------|
| SAMSUNG | ì‚¼ì„±í™”ìž¬ |
| MERITZ | ë©”ë¦¬ì¸ í™”ìž¬ |
| LOTTE | ë¡¯ë°ì†í•´ë³´í—˜ |
| DB | DBì†í•´ë³´í—˜ |
| KB | KBì†í•´ë³´í—˜ |
| HANWHA | í•œí™”ì†í•´ë³´í—˜ |
| HYUNDAI | í˜„ëŒ€í•´ìƒ |
| HEUNGKUK | í¥êµ­í™”ìž¬ |

---

## ë¶€ë¡: ì£¼ìš” ë‹´ë³´ ì½”ë“œ

| ì½”ë“œ | ë‹´ë³´ëª… |
|------|--------|
| A4200_1 | ì•”ì§„ë‹¨ë¹„(ìœ ì‚¬ì•”ì œì™¸) |
| A4210 | ìœ ì‚¬ì•”ì§„ë‹¨ë¹„ |
| A4230 | ë‡Œì¡¸ì¤‘ì§„ë‹¨ë¹„ |
| A4240 | ê¸‰ì„±ì‹¬ê·¼ê²½ìƒ‰ì§„ë‹¨ë¹„ |
| A5100 | ì§ˆë³‘ìˆ˜ìˆ ë¹„ |
| A5300 | ìƒí•´ìˆ˜ìˆ ë¹„ |
| A9630_1 | ë‹¤ë¹ˆì¹˜ë¡œë´‡ì•”ìˆ˜ìˆ ë¹„ |

---

**ë¬¸ì„œ ë**

> ìž‘ì„±ì¼: 2025-12-20
> ë²„ì „: STEP 4.7
